<include target="_tool_header.html" />
<!--%import("./filter/insert_blogapi.xml")-->


<!-- Content -->
<div class="wrap">
    <div class="page-header">
        <h4><span class="fa fa-share"></span> {$lang->upgletyle_second_menus[6]['dispUpgletyleToolConfigBlogApi']} <small>블로그 원격발행 정보를 설정합니다.</small></h4>
    </div>
				
	<div class="listHeader">
		<p class="info">{$lang->about_blog_api}</p>
	</div>

	<div class="setUp">
		<!--@if($type == 'registration')-->
		<form action="./" method="post" onsubmit="return procFilter(this,insert_blogapi);" id="foBlogApi" class="form-horizontal form-config">
		<input type="hidden" name="vid" value="{$vid}" />
		<input type="hidden" name="mid" value="{$mid}" />
		<input type="hidden" name="api_srl" value="{$api_info->api_srl}" />
			<fieldset>
                <div class="page-header page-header-icon">
                <h5>{$lang->blogapi_service}</h5>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 control-label">
                        {$lang->blogapi_service}
                    </label>
                    <div class="col-sm-8">
                        <input type="radio" name="blogapi_service" value="hosted" id="hosted" <!--@if($api_info->blogapi_service!='custom')-->checked="checked"<!--@end--> onclick="jQuery('.hosted').css('display','block');jQuery('.custom').css('display','none');" /> <label for="hosted">{$lang->blogapi_hosted}</label>
						<input type="radio" name="blogapi_service" value="custom" id="custom" <!--@if($api_info->blogapi_service=='custom')-->checked="checked"<!--@end--> onclick="jQuery('.hosted').css('display','none');jQuery('.custom').css('display','block');" /> <label for="custom">{$lang->blogapi_custom}</label>
                        <span class="help-block">{$lang->about_blogapi_service}</span>
                    </div>
                </div>

                <div class="form-group row hosted" hidden|cond="$api_info->blogapi_service=='custom'">
                    <label class="col-sm-3 control-label">
                        {$lang->blogapi_host_provider}
                    </label>
                    <div class="col-sm-8">
                        <input type="hidden" name="blogapi_host_provider_type" />
						<select name="blogapi_host_provider" onchange="getBlogApiServiceInfo(this.value)">
							<option value="">{$lang->blogapi_host_provider}</option>
							<!--@foreach($api_services as $key => $val)-->
							<option value="{$val->textyle_blogapi_services_srl}">{$val->service_name}</option>
							<!--@end-->
						</select>
                        <span class="help-block">{$lang->about_blogapi_host_provider}</span>
                    </div>
                </div>

                <div class="form-group row custom" hidden|cond="$api_info->blogapi_service!='custom'">
                    <label class="col-sm-3 control-label">
                        {$lang->blogapi_type}
                    </label>
                    <div class="col-sm-8">
                        <select name="blogapi_type">
								<option value="metaweblog" <!--@if($api_info->blogapi_type=='metaweblog')-->selected="selected"<!--@end-->>MetaWeblog API</option>
						</select>
                        <span class="help-block">{$lang->about_blogapi_type}</span>
                    </div>
                </div>
			</fieldset>

			<fieldset>
                <div class="page-header page-header-icon">
                <h5>API 정보 입력</h5>
                </div>
                <div class="form-group row">
                    <label for="blogapi_url" class="col-sm-3 control-label">
                        {$lang->blogapi_url}
                    </label>
                    <div class="col-sm-8">
						<div class="row"><div class="col-sm-7">
                        <input name="blogapi_url" type="text" class="form-control input-sm" id="api_url" value="{htmlspecialchars($api_info->blogapi_url)}"/>
						</div></div>
                        <span id="api_url_label" class="help-block hosted"></span>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="blogapi_userid" class="col-sm-3 control-label">
                        {$lang->user_id}
                    </label>
                    <div class="col-sm-8">
						<div class="row"><div class="col-sm-4">
                        <input name="blogapi_user_id" type="text" class="form-control input-sm" id="blogapi_user_id" value="{htmlspecialchars($api_info->blogapi_user_id)}"/>
						</div></div>
                        <span id="blogapi_userid_label" class="help-block hosted"></span>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="blogapi_password" class="col-sm-3 control-label">
                        {$lang->password}
                    </label>
                    <div class="col-sm-8">
						<div class="row"><div class="col-sm-4">
                        <input name="blogapi_password" type="password" class="form-control input-sm" id="blogapi_password" value="{htmlspecialchars($api_info->blogapi_password)}"/>
						</div></div>
                        <span id="blogapi_password_label" class="help-block hosted"></span>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="blogapi_blogid" class="col-sm-3 control-label">
                        {$lang->blogapi_blogid}
                    </label>
                    <div class="col-sm-8">
						<div class="row"><div class="col-sm-5">
                        <input name="blogapi_blogid" type="text" class="form-control input-sm" id="blogapi_blogid" value="{htmlspecialchars($api_info->blogapi_blogid)}"/>
						</div></div>
                        <span id="blogapi_blogid_label" class="help-block">blog id는 여러개의 Blog를 운영할 경우 선택적으로 입력하는 값입니다.</span>
                    </div>
                </div>

				<div class="btnArea">
					<button type="button" onclick="doBlogApiTest(); return false;" class="bts_btn bts_btn-default">{$lang->cmd_check_api_connect}</button>
				</div>
			</fieldset>

			<fieldset hidden|cond="!$api_info->api_srl">
                <div class="page-header page-header-icon" id="response_info">
                <h5>API 원격 서버 정보</h5>
                </div>
                <div class="form-group row">
                    <label for="site_title" class="col-sm-3 control-label">
                        {$lang->blogapi_site_title}
                    </label>
                    <div class="col-sm-8">
						<div class="row"><div class="col-sm-7">
                        <input name="blogapi_site_title" type="text" class="form-control input-sm" id="site_title" value="{htmlspecialchars($api_info->blogapi_site_title)}"/>
						</div></div>
                        <span class="help-block">{$lang->about_blogapi_site_title}</span>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="site_url" class="col-sm-3 control-label">
                        {$lang->blogapi_site_url}
                    </label>
                    <div class="col-sm-8">
						<div class="row"><div class="col-sm-7">
                        <input name="blogapi_site_url" type="text" class="form-control input-sm" id="site_url" value="{htmlspecialchars($api_info->blogapi_site_url)}"/>
						</div></div>
                        <span class="help-block">{$lang->about_blogapi_site_url}</span>
                    </div>
                </div>

				<div class="btnArea submitButton" <!--@if(!$api_info->api_srl)-->style="display:none;"<!--@end-->>
						<!--@if($api_info->api_srl)-->
						<button type="submit" class="bts_btn bts_btn-default">{$lang->cmd_modify}...</button>
						<!--@else-->
						<button type="submit" class="bts_btn bts_btn-default">{$lang->cmd_registration}</button>
						<!--@end-->
				</div>
			</fieldset>
		</form>

		<!--@else-->
        <table class="table table-hover table-upgle table-condensed" summary="Blog Api List" style="margin-top:20px">
			<thead>
				<tr>
					<th scope="col">{$lang->blogapi_site_url}</th>
					<th scope="col">{$lang->target_site_url}</th>
					<th scope="col">{$lang->blogapi_type}</th>
					<th scope="col">{$lang->regdate}</th>
					<th scope="col">{$lang->cmd_setup}</th>
				</tr>
			</thead>
			<tbody>
				<!--@foreach($upgletyle->getApis() as $key => $val)-->
				<tr>
					<th scope="row"><a href="{$val->blogapi_site_url}" onclick="window.open(this.href);return false;">{$val->blogapi_site_title}</a></th>
					<td><a href="{$val->blogapi_site_url}">{$val->blogapi_site_url}</a></td>
					<td>{$val->blogapi_type}</td>
					<td>{zdate($val->regdate, 'Y-m-d')}</td>
					<td>
						<!--@if($val->enable == 'Y')-->
							{@$iconClass = 'buttonActive'}
						<!--@else-->
							{@$iconClass = 'buttonDisable'}
						<!--@end-->
						<button type="button" onclick="doToggleAPI(this,'{$val->api_srl}')" class="bts_btn bts_btn-xs bts_btn-default">{$lang->use}</button>
						<a href="{getUrl('type','registration','api_srl',$val->api_srl)}" class="bts_btn bts_btn-xs  bts_btn-default">{$lang->cmd_modify}</a>
						<button type="button" onclick="if(confirm('{$lang->msg_remove_api}')) doRemoveApi({$val->api_srl})" class="bts_btn bts_btn-xs  bts_btn-danger">{$lang->cmd_delete}</button>
					</td>
				</tr>
				<!--@end-->
			</tbody>
		</table>
		<div class="btnArea">
			<input type="button" onclick="location.href=current_url.setQuery('type','registration').setQuery('api_srl','');return false;" value="{$lang->cmd_registration}" class="bts_btn bts_btn-default bts_btn-sm" />
		</div>
		<!--@end-->
	</div>

</div>
<!-- /Content -->